<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Theory | Enlightened AI</title>

  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/footer.css">

  <script type="application/json" id="theory-manifest">
  {
    "doc_id": "EAIRL-THEORY-001",
    "version": "RAA-3.0",
    "status": "PUBLISHED"
  }
  </script>

  <style>
    /* THEME: Exact match to data.html */
    :root{
      --bg-color:#ffffff;
      --sidebar-bg:#ffffff;
      --text-main:#050505;
      --text-muted:#5e5e5e;
      --border-color:#e5e5e5;
      --card-bg:#fafafa;

      --signal-enforced:#00cc00;
      --status-verified:var(--signal-enforced);

      --lightbox-bg: rgba(255, 255, 255, 0.98);
      --figure-bg: transparent;
      --figure-border: #e5e5e5;
    }

    [data-theme="dark"]{
      --bg-color:#050505;
      --sidebar-bg:#050505;
      --text-main:#e0e0e0;
      --text-muted:#888888;
      --border-color:#333333;
      --card-bg:#111111;

      --lightbox-bg: rgba(0, 0, 0, 0.98);
      --figure-bg: #111;
      --figure-border: #333;
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;padding:0;
      font-family:"Inter",sans-serif;
      background:var(--bg-color);
      color:var(--text-main);
      line-height:1.6;
      transition:background .3s ease,color .3s ease;
    }

    /* TYPOGRAPHY */
    h1{
      font-size:1.8rem; /* Larger for Theory Title */
      font-weight:700;
      letter-spacing:-0.02em;
      margin:0 0 1rem 0;
      text-transform:uppercase;
      line-height: 1.1;
    }
    h2{
      font-size:0.9rem;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:0.05em;
      margin:4rem 0 1.5rem 0;
      border-bottom:1px solid var(--border-color);
      padding-bottom:0.5rem;
    }
    p{
      font-size:0.95rem;
      margin:0 0 1.5rem 0;
      color:var(--text-main);
      max-width:70ch;
    }
    .mono{font-family:"JetBrains Mono",monospace;font-size:0.7rem;text-transform:uppercase;letter-spacing:0.05em}
    
    .scramble{
      font-family:"JetBrains Mono",monospace;
      font-weight:400;
      color:var(--text-muted);
      margin-right:0.75rem;
      cursor:crosshair;
      user-select:none;
    }

    /* HEADER STRIP */
    .global-header-strip{
      width:100%;
      padding:2rem 4rem;
      border-bottom:1px solid var(--border-color);
      background:var(--bg-color);
      z-index:10;
    }
    .header-meta{
      display:flex;
      align-items:center;
      gap:1.5rem;
      flex-wrap:wrap;
      margin-bottom:1rem;
      font-family:"JetBrains Mono",monospace;
      font-size:0.7rem;
      color:var(--text-muted);
    }
    .orienting-frame{
      font-family:"JetBrains Mono",monospace;
      font-size:0.65rem;
      color:var(--text-muted);
      text-transform:uppercase;
      letter-spacing:0.05em;
      border-left:1px solid var(--border-color);
      padding-left:12px;
      max-width:900px;
      line-height:1.4;
    }

    .integrity-seal{
      display:flex;
      align-items:center;
      gap:8px;
      font-family:"JetBrains Mono",monospace;
      font-size:0.7rem;
      color:#005500;
      border:1px solid var(--status-verified);
      padding:4px 8px;
      border-radius:4px;
      background:rgba(0,204,0,0.03);
      cursor:default;
    }
    .status-dot{
      width:8px;height:8px;border-radius:50%;
      background:var(--status-verified);
      display:block;
      box-shadow:0 0 5px rgba(0,204,0,0.5);
    }

    /* SIDEBAR */
    nav ul{list-style:none;padding:0;margin:0}
    nav li{margin-bottom:4px}
    nav a{
      text-decoration:none;
      color:var(--text-muted);
      font-size:0.85rem;
      display:block;
      padding:2px 0 2px 10px;
      border-left:2px solid transparent;
    }
    nav a:hover{color:var(--text-main)}
    nav a.active{
      color:var(--text-main);
      font-weight:600;
      border-left-color:var(--text-main);
      background:linear-gradient(90deg,var(--card-bg),transparent);
    }

    .brand{margin-bottom:6rem;cursor:crosshair !important}
    .brand div{
      font-family:"JetBrains Mono",monospace;
      font-weight:800;
      font-size:0.95rem;
      line-height:1.0;
      color:var(--text-main);
    }
    .brand span{
      display:block;
      margin-top:6px;
      font-weight:500;
      font-size:0.7rem;
      letter-spacing:0.05em;
      color:var(--text-muted);
    }

    .theme-switch{
      display:flex;
      justify-content:space-between;
      padding:12px 0;
      font-family:"JetBrains Mono",monospace;
      font-size:0.7rem;
      color:var(--text-muted);
      cursor:pointer;
    }
    .theme-switch:hover{color:var(--text-main)}

    /* LAYOUT */
    @media (min-width:1101px){
      body{display:flex;flex-direction:column;min-height:100vh}
      .layout-wrapper{display:flex;flex:1;width:100%}

      aside#sidebar{
        width:240px;
        position:sticky;
        top:0;
        border-right:1px solid var(--border-color);
        padding:0;
        display:flex;
        flex-direction:column;
        z-index:99;
        background:var(--sidebar-bg);
        flex-shrink:0;
        overflow:hidden;
        align-self:flex-start;
        max-height:100vh;
      }
      .sidebar-scroll{flex:1;min-height:0;overflow-y:auto;padding:2rem}
      .sidebar-bottom{padding:0 2rem 2rem 2rem;background:var(--sidebar-bg);border-top:1px solid var(--border-color)}
      .theme-switch{position:static;margin:0 0 1rem 0 !important;border-top:none !important}

      .main-column{flex-grow:1;display:flex;flex-direction:column;min-width:0}
      .split-view{display:flex;flex:1;align-items:flex-start;min-width:0}
      .content-col{
        flex:1 1 auto;
        min-width:0;
        padding:3rem 4rem 6rem 4rem;
        display:flex;
        flex-direction:column;
      }
      #footer-mount{
        width:100%;
        border-top:1px solid var(--border-color);
        background:var(--bg-color);
        position:relative;
        z-index:100;
      }
    }

    /* THEORY SPECIFIC COMPONENTS */
    .section-grid { display: grid; grid-template-columns: 1fr auto; gap: 3rem; align-items: start; margin-bottom: 3rem; }
    
    .diagram-thumbnail {
        background: var(--figure-bg);
        border: 1px solid var(--figure-border);
        padding: 6px;
        transition: transform 0.2s;
        cursor: zoom-in;
        width: 280px; flex-shrink: 0;
        border-radius: 4px;
    }
    .diagram-thumbnail:hover { transform: translateY(-2px); }
    
    .diagram-img {
        width: 100%; height: auto; display: block; border-radius: 2px;
        transition: filter 0.3s ease;
        border: 1px solid var(--figure-border);
    }
    
    .diagram-caption {
        font-family: "JetBrains Mono", monospace; font-size: 0.65rem; color: var(--text-muted);
        text-transform: uppercase; letter-spacing: 0.05em; margin-top: 8px; text-align: left; line-height: 1.3;
    }

    /* --- IMAGE INVERSION LOGIC (FILENAME BASED) --- */
    
    /* 1. BLACK SOURCES (Fig 1 & Fig 5) -> Invert in Light Mode */
    body[data-theme="light"] img[src*="fig1"], 
    body[data-theme="light"] img[src*="fig5"] {
        filter: invert(1) hue-rotate(180deg) !important;
    }
    body[data-theme="dark"] img[src*="fig1"], 
    body[data-theme="dark"] img[src*="fig5"] {
        filter: none !important;
        border-color: #333;
    }

    /* 2. WHITE SOURCES (Fig 2, Fig 3, Fig 4) -> Invert in Dark Mode */
    body[data-theme="light"] img[src*="fig2"], 
    body[data-theme="light"] img[src*="fig3"],
    body[data-theme="light"] img[src*="fig4"] {
        filter: none !important;
    }
    body[data-theme="dark"] img[src*="fig2"], 
    body[data-theme="dark"] img[src*="fig3"],
    body[data-theme="dark"] img[src*="fig4"] {
        filter: invert(1) hue-rotate(180deg) !important;
        border-color: #333;
    }

    /* LIGHTBOX */
    #lightbox-modal { display: none; position: fixed; z-index: 9999; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--lightbox-bg); backdrop-filter: blur(5px); align-items: center; justify-content: center; padding: 2rem; cursor: zoom-out; }
    #lightbox-img { max-width: 90%; max-height: 90%; box-shadow: 0 20px 50px rgba(0,0,0,0.3); transition: filter 0.3s ease; }
    
    /* Lightbox Inheritance */
    body[data-theme="light"] #lightbox-img[src*="fig1"],
    body[data-theme="light"] #lightbox-img[src*="fig5"] { filter: invert(1) hue-rotate(180deg) !important; }
    body[data-theme="dark"] #lightbox-img[src*="fig2"],
    body[data-theme="dark"] #lightbox-img[src*="fig3"],
    body[data-theme="dark"] #lightbox-img[src*="fig4"] { filter: invert(1) hue-rotate(180deg) !important; }

    /* COMPONENTS */
    .theory-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
    .force-card { border: 1px solid var(--border-color); padding: 1.25rem; background: var(--card-bg); }
    .force-id { font-family: "JetBrains Mono", monospace; font-size: 0.7rem; color: var(--accent-blue); font-weight: 700; display:block; margin-bottom: 0.5rem; }
    .force-title { font-weight: 700; font-size: 0.85rem; margin-bottom: 0.5rem; text-transform: uppercase; }
    .force-desc { font-size: 0.8rem; color: var(--text-muted); line-height: 1.5; }

    .metric-container { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-top: 1rem; }
    .metric-box { border: 1px solid var(--border-color); padding: 1.5rem; text-align: center; background: var(--card-bg); }
    .metric-symbol { font-family: "JetBrains Mono", monospace; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; display: block; }
    .metric-name { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; display: block; margin-bottom: 0.5rem; }
    .metric-def { font-size: 0.75rem; color: var(--text-muted); line-height: 1.4; }

    .logic-block {
      font-family: "JetBrains Mono", monospace; font-size: 0.75rem;
      background: var(--bg-color); border: 1px solid var(--border-color);
      border-left: 2px solid var(--accent-blue);
      padding: 1rem 1.5rem; margin: 1rem 0;
      color: var(--text-muted); white-space: pre-wrap;
    }

    /* MOBILE */
    @media (max-width:1100px){
      body{display:block;overflow-x:hidden}
      .layout-wrapper{display:block}
      body.sidebar-open{position:fixed;width:100%;overflow:hidden}
      #sidebar-overlay{
        position:fixed;top:50px;left:0;right:0;bottom:0;
        background:rgba(0,0,0,0.5);opacity:0;pointer-events:none;
        transition:opacity .25s ease;z-index:9999;backdrop-filter:blur(2px);
      }
      aside#sidebar.open ~ #sidebar-overlay{opacity:1;pointer-events:auto}
      aside#sidebar{
        position:fixed;top:50px;left:0;bottom:0;width:100%;
        transform:translateX(-100%);transition:transform .25s ease;
        border-right:none;background:var(--sidebar-bg);z-index:10000;
        height:calc(100dvh - 50px);display:flex;flex-direction:column;
        overflow:hidden;padding:0;
      }
      aside#sidebar.open{transform:translateX(0)}
      .global-header-strip{padding:2rem}
      .main-column{margin-top:50px;padding:0;width:100%;max-width:100vw;display:block}
      .content-col{padding:1.5rem;max-width:none}
      #footer-mount{width:100%}
      .section-grid{grid-template-columns:1fr; gap:2rem;}
      .diagram-thumbnail{width:100%;max-width:350px;margin:0 auto;}
      .metric-container{grid-template-columns:1fr;}
    }
  </style>
</head>

<body data-theme="light">

  <div id="lightbox-modal" onclick="closeLightbox()">
    <img id="lightbox-img" src="" alt="Expanded View">
  </div>

  <header style="display:none; position:fixed; top:0; left:0; right:0; z-index:10001; background:var(--bg-color); border-bottom:1px solid var(--border-color); padding:0 1.25rem; height:50px; align-items:center; justify-content:space-between; backdrop-filter:blur(10px);" id="mobile-bar">
    <div style="font-weight:800; font-size:0.85rem; letter-spacing:-0.02em; color:var(--text-main);">ENLIGHTENED AI</div>
    <div style="display:flex; gap:15px; align-items:center;">
      <span onclick="toggleTheme()" style="cursor:pointer; font-size:1rem; color:var(--text-main);">◐</span>
      <button onclick="toggleSidebar()" style="font-family:'JetBrains Mono', monospace; font-size:0.75rem; padding:4px 10px; border:1px solid var(--border-color); background:var(--bg-color); color:var(--text-main); cursor:pointer;">INDEX</button>
    </div>
  </header>

  <div class="layout-wrapper">
    <aside id="sidebar">
      <div class="sidebar-scroll">
        <div class="brand">
          <div class="scramble" style="font-weight:800; font-size:0.95rem;">ENLIGHTENED AI</div>
          <div class="scramble" style="font-weight:800; font-size:0.95rem;">RESEARCH LAB</div>
          <span>EST. 2026 // MONTREAL</span>
        </div>

        <nav>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="theory.html" class="active">Theory</a></li>
            <li><a href="lexicon.html">Lexicon</a></li>
            <li><a href="reflective-diagnostics.html">Diagnostics</a></li>
            <li><a href="data.html">Data</a></li>
            <li><a href="videos.html">Videos</a></li>
          </ul>
        </nav>
      </div>

      <div class="sidebar-bottom">
        <div class="theme-switch" onclick="toggleTheme()">
          [ LIGHT / DARK ] <span id="theme-icon">◐</span>
        </div>
      </div>
    </aside>

    <div id="sidebar-overlay" onclick="closeSidebar()"></div>

    <div class="main-column">
      <div class="global-header-strip">
        <div class="header-meta">
          <div><span style="color:var(--text-muted); font-size:0.6rem; display:inline-block; margin-right:6px;">DOC_ID</span>EAIRL-THEORY-001</div>
          <div><span style="color:var(--text-muted); font-size:0.6rem; display:inline-block; margin-right:6px;">VERSION</span>RAA-3.0</div>
          <div class="integrity-seal"><span class="status-dot"></span>STATUS: PUBLISHED</div>
        </div>
        <div class="orienting-frame">REFLECTIVE ALIGNMENT ARCHITECTURE (RAA) & REFLECTIVE DUALITY LAYER (RDL)</div>
      </div>

      <div class="split-view">
        <div class="content-col">

          <section>
            <h1>Reflective Alignment Architecture</h1>
            <div class="doc-subtitle" style="margin-bottom:2rem;">From behavioral compliance to internal coherence.</div>
            
            <a href="https://drive.google.com/file/d/1RgM-8PwM0ZVuoLBBmWgf4W2j2hmrPzuj/view?usp=sharing" target="_blank" 
               style="background: var(--text-main); color: var(--bg-color); padding: 10px 20px; text-decoration: none; font-size: 0.75rem; font-weight: 700; border-radius: 2px; display: inline-block; margin-bottom:3rem; border:1px solid var(--border-color);">
               READ FULL PAPER (PDF) →
            </a>

            <div class="section-grid">
              <div class="text-col">
                  <p>Current alignment practices evaluate only surface outputs, leaving the internal decision processes that generate those outputs largely unmeasured. As a result, models can appear safe in benchmarks while their underlying reasoning is brittle, contradictory, or drift-prone.</p>
                  <p>We introduce the <strong>Reflective Alignment Architecture (RAA)</strong> and the <strong>Reflective Duality Layer (RDL)</strong> — a model-agnostic scientific framework for observing and quantifying an AI system's coherence stability.</p>
              </div>
              <div class="diagram-thumbnail" onclick="openLightbox('assets/img/theory/fig1.png')">
                  <img src="assets/img/theory/fig1.png" alt="Alignment Drift Curve" class="diagram-img" onerror="this.style.display='none'">
                  <div class="diagram-caption">FIG. 01: ALIGNMENT DRIFT CURVE</div>
              </div>
            </div>
          </section>

          <section>
            <h2>01 // The 5R Framework (RAA)</h2>
            <div class="section-grid">
                <div class="text-col">
                    <p>Every morally meaningful decision arises from the interaction of five internal forces. Alignment emerges only when these forces remain in stable interaction.</p>
                    <div class="theory-grid">
                        <div class="force-card">
                            <span class="force-id">R1</span>
                            <div class="force-title">Regulation</div>
                            <div class="force-desc">The system's boundary layer. Adherence to legal, ethical, and safety constraints.</div>
                        </div>
                        <div class="force-card">
                            <span class="force-id">R2</span>
                            <div class="force-title">Reflection</div>
                            <div class="force-desc">Metacognitive self-critique. The ability to detect uncertainty and identify errors.</div>
                        </div>
                        <div class="force-card">
                            <span class="force-id">R3</span>
                            <div class="force-title">Reasoning</div>
                            <div class="force-desc">The engine of coherent thought. Logical consistency and evidence integration.</div>
                        </div>
                    </div>
                </div>
                <div class="diagram-thumbnail" onclick="openLightbox('assets/img/theory/fig2.png')">
                    <img src="assets/img/theory/fig2.png" alt="RAA Force Map" class="diagram-img" onerror="this.style.display='none'">
                    <div class="diagram-caption">FIG. 02: THE 5-FORCE ONTOLOGY</div>
                </div>
            </div>

            <div class="theory-grid">
                <div class="force-card">
                    <span class="force-id">R4</span>
                    <div class="force-title">Reciprocity</div>
                    <div class="force-desc">Modeling others. Perspective-taking, rights recognition, and understanding impact.</div>
                </div>
                <div class="force-card">
                    <span class="force-id">R5</span>
                    <div class="force-title">Resonance</div>
                    <div class="force-desc">Long-horizon stability. Maintaining a stable moral identity across context and time.</div>
                </div>
            </div>
          </section>

          <section>
            <h2>02 // The Reflective Duality Layer (RDL)</h2>
            <div class="section-grid">
                <div class="text-col">
                    <p>RDL operationalizes the RAA forces by providing a measurement layer for internal dynamics. It replaces single-pass answers with dual coupled trajectories.</p>
                    <div class="logic-block"># RDL Dual-Trajectory logic
def evaluate_stability(input):
    F_trace = model.forward_reasoning(input)
    Q_trace = model.reflective_critique(F_trace)

    reflective_gap = distance(F_trace, Q_trace)

    if reflective_gap > THRESHOLD:
        return "DRIFT_DETECTED"
    else:
        return "COHERENT_STATE"</div>
                </div>
                <div class="diagram-thumbnail" onclick="openLightbox('assets/img/theory/fig3.png')">
                    <img src="assets/img/theory/fig3.png" alt="RDL Workflow" class="diagram-img" onerror="this.style.display='none'">
                    <div class="diagram-caption">FIG. 03: RDL SYSTEM ARCHITECTURE</div>
                </div>
            </div>
          </section>

          <section>
            <h2>03 // Core Metrics</h2>
            <div class="section-grid">
                <div class="text-col">
                    <p>The system evaluates alignment through three predictive stability metrics that quantify internal coherence.</p>
                    <div class="metric-container">
                        <div class="metric-box">
                            <span class="metric-symbol">Ψ</span>
                            <span class="metric-name">Care Param</span>
                            <div class="metric-def">Depth of reflective attention.</div>
                        </div>
                        <div class="metric-box">
                            <span class="metric-symbol">R∇</span>
                            <span class="metric-name">Refl. Gradient</span>
                            <div class="metric-def">Does reflection stabilize reasoning?</div>
                        </div>
                        <div class="metric-box">
                            <span class="metric-symbol">MCI</span>
                            <span class="metric-name">Moral Index</span>
                            <div class="metric-def">Long-horizon stability score.</div>
                        </div>
                    </div>
                </div>
                <div class="diagram-thumbnail" onclick="openLightbox('assets/img/theory/fig4.png')">
                    <img src="assets/img/theory/fig4.png" alt="Core Metrics" class="diagram-img" onerror="this.style.display='none'">
                    <div class="diagram-caption">FIG. 04: THE METRIC TRIAD</div>
                </div>
            </div>
          </section>

          <section>
            <h2>04 // Failure Signatures</h2>
            <div class="section-grid">
                <div class="text-col">
                    <p>Instabilities in the R-forces consistently predict specific failure modes across all major model families.</p>
                    <ul>
                      <li><strong>Sub-Goal Pitfall:</strong> R3 (Reasoning) outpaces R1 (Regulation), leading to unsafe optimization.</li>
                      <li><strong>Ethical Drift:</strong> R5 (Resonance) collapses under time pressure or long contexts.</li>
                      <li><strong>Moral Mode-Switching:</strong> R2 (Reflection) contradicts R1 (Regulation) depending on framing.</li>
                      <li><strong>Care Erosion:</strong> Decline in Ψ across turns, often preceding major stability failures.</li>
                    </ul>
                </div>
                <div class="diagram-thumbnail" onclick="openLightbox('assets/img/theory/fig5.png')">
                    <img src="assets/img/theory/fig5.png" alt="Failure Signatures Heatmap" class="diagram-img" onerror="this.style.display='none'">
                    <div class="diagram-caption">FIG. 05: STABILITY FAILURE MODES</div>
                </div>
            </div>
          </section>

        </div>
      </div>
    </div>
  </div>

  <div id="footer-mount"></div>

  <script>
    function openLightbox(src) {
        const modal = document.getElementById('lightbox-modal');
        const img = document.getElementById('lightbox-img');
        if (!src) return;
        img.src = src;
        modal.style.display = 'flex';
    }
    
    function closeLightbox() {
        document.getElementById('lightbox-modal').style.display = 'none';
    }

    fetch('/partials/footer.html')
      .then(r => r.ok ? r.text() : '')
      .then(html => { if (html) document.getElementById('footer-mount').innerHTML = html; })
      .catch(() => {});

    function setTheme(theme) {
      document.body.setAttribute('data-theme', theme);
      localStorage.setItem('enlightened_theme', theme);
      const icon = document.getElementById('theme-icon');
      if (icon) icon.textContent = (theme === 'dark') ? '◑' : '◐';
    }
    function toggleTheme() {
      const current = document.body.getAttribute('data-theme') || 'light';
      setTheme(current === 'dark' ? 'light' : 'dark');
    }
    
    // Sync theme
    const savedTheme = localStorage.getItem('enlightened_theme');
    if (savedTheme) { setTheme(savedTheme); }

    // Sidebar Mobile
    let __scrollY = 0;
    function openSidebar() {
      __scrollY = window.scrollY || document.documentElement.scrollTop || 0;
      document.body.style.top = `-${__scrollY}px`;
      document.getElementById('sidebar').classList.add('open');
      document.body.classList.add('sidebar-open');
    }
    function closeSidebar() {
      document.getElementById('sidebar').classList.remove('open');
      document.body.classList.remove('sidebar-open');
      const y = __scrollY;
      document.body.style.top = '';
      window.scrollTo(0, y);
    }
    function toggleSidebar() {
      const sb = document.getElementById('sidebar');
      sb.classList.contains('open') ? closeSidebar() : openSidebar();
    }
    document.querySelectorAll('#sidebar a[href^="#"]').forEach(a => {
      a.addEventListener('click', () => { if (window.innerWidth <= 1100) closeSidebar(); });
    });
    
    // Scramble Text
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";
    function scrambleText(element) {
      let iterations = 0;
      const originalText = element.dataset.value;
      if (element.interval) clearInterval(element.interval);
      element.interval = setInterval(() => {
        element.innerText = originalText.split("").map((ch, idx) => {
          if (idx < iterations) return originalText[idx];
          return letters[Math.floor(Math.random() * letters.length)];
        }).join("");
        if (iterations >= originalText.length) clearInterval(element.interval);
        iterations += 1 / 3;
      }, 30);
    }
    document.querySelectorAll(".scramble").forEach(h => {
      h.dataset.value = h.innerText;
      h.addEventListener("mouseover", e => scrambleText(e.target));
    });
    
    // Mobile Bar Sync
    (function syncMobileBar() {
      const bar = document.getElementById('mobile-bar');
      const apply = () => { bar.style.display = (window.innerWidth <= 1100) ? 'flex' : 'none'; };
      window.addEventListener('resize', apply);
      apply();
    })();
  </script>

</body>
</html>
