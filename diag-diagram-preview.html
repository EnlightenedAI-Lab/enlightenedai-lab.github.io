<!-- SAVE AS: /docs/diag-diagram-preview.html  -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RD Diagram Preview (v3 guided)</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff;
      --text:#050505;
      --muted:#6a6a6a;
      --border:#e5e5e5;
      --border2:#cfcfcf;
      --mono:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      --sans:"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      --ok:#00cc00;
      --warn:#ffb000;
      --bad:#cc0000;

      --activeStroke:#050505;
      --inactiveOpacity:0.25;
      --activeOpacity:1;
    }

    *{box-sizing:border-box}
    body{ margin:0; background:var(--bg); color:var(--text); font-family:var(--sans); }
    .wrap{ max-width:1240px; margin:0 auto; padding:42px 24px 60px; }

    h1{ margin:0 0 8px 0; font-size:34px; font-weight:600; letter-spacing:-0.02em; }
    .sub{ font-family:var(--mono); color:var(--muted); font-size:12px; letter-spacing:0.04em; }

    .row{
      display:flex;
      align-items:flex-start;
      gap:18px;
      margin-top:18px;
    }

    .card{
      flex: 1;
      border:1px solid var(--border);
      border-radius:18px;
      padding:18px;
      background:var(--bg);
    }

    .panel{
      width: 340px;
      border:1px solid var(--border);
      border-radius:18px;
      padding:16px;
      background:var(--bg);
    }

    .panel .kicker{
      font-family:var(--mono);
      color:var(--muted);
      font-size:11px;
      letter-spacing:0.08em;
      text-transform:uppercase;
      margin-bottom:10px;
    }

    .stepnum{
      font-family:var(--mono);
      font-size:12px;
      letter-spacing:0.10em;
      color:var(--muted);
      margin-bottom:10px;
    }

    .steptitle{
      font-size:16px;
      font-weight:700;
      letter-spacing:-0.01em;
      margin-bottom:10px;
    }

    .steptext{
      font-family:var(--sans);
      font-size:13px;
      color:var(--text);
      line-height:1.55;
    }

    .controls{
      display:flex;
      gap:10px;
      margin-top:14px;
      flex-wrap:wrap;
    }

    .btn{
      font-family:var(--mono);
      font-size:12px;
      padding:8px 10px;
      border:1px solid var(--border);
      background:var(--bg);
      color:var(--text);
      cursor:pointer;
      border-radius:10px;
      user-select:none;
    }
    .btn:hover{ border-color: #bdbdbd; }

    .svg-wrap{ width:100%; overflow:auto; }
    svg{ display:block; width:100%; height:auto; min-width:1200px; }

    /* Guided emphasis */
    .dim { opacity: var(--inactiveOpacity); transition: opacity 180ms ease; }
    .active { opacity: var(--activeOpacity); transition: opacity 180ms ease; }
    .stroke-active { stroke: var(--activeStroke) !important; }
    .stroke-normal { stroke: #cfcfcf; }

    /* Small “step badge” overlay */
    .badge { display:none; }
    .badge.show { display:block; }

    @media (max-width: 980px){
      .row{ flex-direction:column; }
      .panel{ width:100%; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h1>Reflective Diagnostics — Deterministic Record Flow</h1>
    <div class="sub">GUIDED SEQUENCE • STATIC STYLE • PUBLIC SAFE (NO INTERNAL METRICS)</div>

    <div class="row">
      <div class="card">
        <div class="svg-wrap">
          <svg xmlns="http://www.w3.org/2000/svg" width="1600" height="640" viewBox="0 0 1600 640" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Reflective Diagnostics flow">
            <defs>
              <style>
                .frame{fill:#ffffff;stroke:#e5e5e5;stroke-width:1.5}
